!!! 5
%html
  %head
    %meta(http-equiv="content-type" content="text/html; charset=UTF-8")
    %title Lonely Planet
    %link(media="screen" rel="stylesheet" type="text/css"){ href: "#{root_path}/static/all.css" }
    %link(rel="stylesheet" type="text/css"){ href: "#{root_path}/static/font-awesome.min.css" }
    %script(type="text/javascript"){ src: "#{root_path}/static/jquery-2.1.1.min.js" }
  %body
    #container
      #header
        #logo
        %h1
          = "Lonely Planet: #{title}"

      #wrapper
        #sidebar
          .block
            %h3 Navigation
            .content
              .inner
                %ul.navigation
                  - navigation_items.each do |item|
                    %li
                      %a{ href: item.href }
                        %i.fa{class: item.icon}
                        = item.text
        #main
          - sections.each do |section|
            .block
              .secondary-navigation
                %ul
                  %li.first
                    %a{ href: '#' }
                      = section.title
                .clear
              .content
                .inner
                  - section.paragraphs.each do |p|
                    %p
                      = p

                  - section.extra_paragraphs.each do |p|
                    %p.extra(style="display: none;")
                      = p

                  - if section.extra_paragraphs.length > 0
                    %a(href="#" data-action="extra") Click to toggle more...
    :coffee
      $('[data-action=extra]').click (e) ->
        e.preventDefault()

        $(e.target).closest('.inner').find('p.extra').slideToggle('slow')


